# Load Balancer Options

- All load balancers are software appliances (software defined networking: SDN)
- ðŸ’¡ Only Standard (not Basic) SKU allows availability zones in Load balancer

## Cross-Region Load Balancer - **NEW 2025**

- **Global load balancer** (Standard Load Balancer global tier)
- Provides **geo-redundant load balancing** across multiple Azure regions
- Offers **ultra-low latency** global traffic distribution
- Features:
  - **Static anycast IP**: Single global IP address that front-ends regional load balancers
  - **Automatic failover**: If a region fails, traffic automatically routes to closest healthy region
  - Zone redundancy and high availability
  - Supports both IPv4 and IPv6
- Use cases:
  - Global applications requiring low-latency access
  - Disaster recovery and business continuity
  - Multi-region deployments
- When to use:
  - **Cross-region Load Balancer**: For Layer 4 TCP/UDP load balancing across regions
  - **Traffic Manager**: For DNS-based geographic routing
  - **Azure Front Door**: For global HTTP load balancing with WAF and CDN
  - **Application Gateway**: For Layer 7 application-level load balancing within a region

## Public Load Balancer

- OSI Layer 4 TCP and UDP
- Internet-facing, has public IP address
- Offers two distribution modes
- ***Set-up public load balancer***
  1. Settings â†’ Back-end-pools â†’ Add VMs
  2. Settings â†’ Health-probe â†’ Add health probe
     - E.g. tcp-80-probe (HTTP) probe
     - Set interval â†’ time between probe events
     - Set unhealth threshold (e.g. 2) before VM is dropped out from the pool
     - Add load balancing port
     - Incoming request from port 80 (*port*) will be passed to TCP port 80 (*back-end port*)
     - Select backend pool & health-probe
     - Set session persistence
     - Floating IP (direct server return)
       - Use with internal load balancers
       - Use with SQL server always on cluster
       - Used when same back-end port needs to be used across multiple rules in a single Load Balancer
  3. Add inbound NAT rule
     - Map TCP 5000 to a VMs RDP port (3389)
     - Map TCP 5001 to a VMs SSH port (22)

## Internal load balancer

- OSI Layer 4 TCP and UDP
- Applies to traffic only within a virtual network
  - No public IP address
- Good for applying load balancing to n-tier application services (database)

## Application Gateway

- OSI Layer 7 application
- Application Delivery Controller (ADC) as a service
- SSL/TLS offload
- **Web Application Firewall (WAF)** v2 with improved autoscaling and zone redundancy
- Supports:
  - Path-based routing
  - Multi-site routing
  - Cookie-based session affinity
  - URL redirect and rewrite

## Azure Front Door

- **Global HTTP load balancing** with CDN capabilities
- Standard/Premium tiers available
- Features:
  - Global load balancing and acceleration
  - Web Application Firewall (WAF) protection
  - DDoS protection
  - CDN caching for static content
  - SSL/TLS termination
  - URL-based routing
  - Session affinity

## Traffic Manager

- DNS-level load balancer
- Geographical load balancing based on DNS queries
- Offers different routing methods:
  - **Priority**: Primary and backup endpoints
  - **Weighted**: Distribute traffic based on weights
  - **Performance**: Route to closest/lowest latency endpoint
  - **Geographic**: Route based on user's geographic location
  - **Multi-value**: Return multiple healthy endpoints
